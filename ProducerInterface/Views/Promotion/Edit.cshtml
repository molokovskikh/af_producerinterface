
@{
    ViewBag.Title = (Model != null && Model.Id != 0 ? "Редактирование акции" : "Добавление акции");
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<div class="container" id="PromotionEditDiv" name="PromotionEditDiv">

    <div class="row">
        <div class="col-xs-12">
            <h3 data-bind="text: Title"></h3>
        </div>
    </div>

    <input hidden="hidden" id="PromotionId" name="PromotionId" value="@ViewBag.PromotionId" />

    <div class="row">
        <div class="col-xs-12">
            <div class="row">
                <form action="@Url.Action("Edit")" method="post" data-bind="event:{submit: Validation}">
                    <input type="text" id="Id" name="Name" hidden="hidden" data-bind="value: Id" />

                    <div class="col-xs-12">
                        <div class="form-group">
                            <label>Наименование акции</label>
                            <input type="text" data-bind="value: Name" class="form-control" />
                            <span class="field-validation-error" data-bind="text: NameError"></span>
                        </div>
                    </div>

                    <div class="col-xs-12">
                        <div class="form-group">
                            <label>Аннотация <strong class="text-info" data-bind="text: AnnotationLightOstalos"></strong></label>
                            <textarea rows="5" data-bind="value: Annotation, valueUpdate: 'afterkeydown', event:{keydown: Event_Annotation}" class="form-control" typeof="input"></textarea>
                            <span class="field-validation-error" data-bind="text: AnnotationError"></span>
                        </div>
                    </div>

                    <div class="col-xs-12">
                        <div class="form-group">
                            <label>Список лекарств, участвующих в акции</label>
                            <select typeod="input" multiple="" data-bind="foreach: DrugCatalogList, selectedOptions: DrugList, event: {change: Event_DrudList}" class="ui fluid search dropdown">
                                <option data-bind="text: Text, value: Value"></option>
                            </select>
                            <span class="field-validation-error" data-bind="text: DrugListError"></span>
                        </div>
                    </div>


                    <div class="col-xs-12">
                        <div class="form-group">
                            <label>Список регионов</label>
                            <select style="height:300px;" typeof="input" multiple="" data-bind="foreach: RegionGlobalList, selectedOptions: RegionList,  event: {change: Event_RegionList}" class="ui fluid search dropdown">
                                <option data-bind="text: Text, value: Value"></option>
                            </select>
                            <span class="field-validation-error" data-bind="text: RegionListError"></span>
                        </div>
                    </div>

                    <div class="col-xs-12">
                        <div class="form-group">
                            <label>Список поставщиков</label>
                            <input type="checkbox" data-bind="checked: AllSupplier, event: {change: Event_AllSupplier}" />

                            <select class="ui fluid search dropdown" multiple="" data-bind="foreach: SuppierRegionsList, selectedOptions: SuppierRegions" id="SuppierRegions" name="SuppierRegions">
                                <option value="">Поставщики</option>
                                <option data-bind="text: Text, value: Value"></option>
                            </select>
                            <span class="field-validation-error" data-bind="text: SuppierRegionsError"></span>
                        </div>
                    </div>

                    <div class="row">

                        <div class="col-xs-6">
                            <div class="col-xs-12">
                                <div class="form-group">
                                    <label>Дата начала акции</label>
                                    <input type="text" id="Begin" name="Begin" data-bind="value: Begin" class="form-control" readonly />
                                    <span class="field-validation-error" data-bind="text: BeginError"></span>
                                </div>
                            </div>
                        </div>

                        <div class="col-xs-6">
                            <div class="col-xs-12">
                                <div class="form-group">
                                    <label>Дата окончания акции</label>
                                    <input type="text" id="End" name="End" data-bind="value: End" class="form-control" readonly />
                                    <span class="field-validation-error" data-bind="text: EndError"></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-xs-12">
                        <div class="form-group">
                            <label>Прикреплённый файл</label>
                            <a data-bind="text: PromotionFileName, attr: { href: PromotionFileUrl} "></a>
                            <br />  <label>Добавление файла</label>
                            <input name="file" id="file" type="file" class="form-control">
                            <span class="field-validation-error" data-bind="text: FileError"></span>
                        </div>
                    </div>

                    <div class="col-xs-12">
                        <div class="form-group">
                            <input type="submit" class="btn btn-primary" value="Добавить/Сохранить изменения" />
                        </div>
                    </div>

                </form>
            </div>
        </div>
    </div>
</div>

@section styles
        {
    <link href="~/Content/bootstrap-datepicker.min.css" rel="stylesheet" />
    <link href="~/Content/FileUpload.css" rel="stylesheet" />
    <link href="~/Content/SemanticUI/dropdown.min.css" rel="stylesheet" />
    <link href="~/Content/SemanticUI/transition.min.css" rel="stylesheet" />
    <link href="~/Content/SemanticUI/item.min.css" rel="stylesheet" />
    <link href="~/Content/SemanticUI/label.min.css" rel="stylesheet" />
    <link href="~/Content/SemanticUI/icon.min.css" rel="stylesheet" />
}

@section JavaScript
{
    <script src="~/Scripts/knockout-3.4.0.js"></script>
    <script src="~/Scripts/knockout-3.4.0.debug.js"></script>
    <script src="~/Scripts/bootstrap-datepicker.min.js"></script>
    <script src="~/Scripts/SemanticUI/dropdown.min.js"></script>
    <script src="~/Scripts/SemanticUI/transition.min.js"></script>
    <link href="~/Scripts/SemanticUI/reset.min.css" rel="stylesheet" />
    <script src="~/Scripts/WorkPlace/Promotion_Edit.js"></script>
}