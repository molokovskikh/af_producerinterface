@using AnalitFramefork.Extensions
@using AnalitFramefork.Hibernate.Models
@model dynamic
@{
    var templates = ViewBag.ReportTemplates as List<ReportTemplate>;
}

<section id="main">
	<header class="page-header">
		<div class="container">
		</div>
	</header>
    <div class="container">
            <div class="row">
                <div class="content blog col-sm-9 col-md-9">
                    <p>
                        <a href="@Url.Action("CreateReportTemplate")" class="btn btn-success">
                            <i class="fa fa-plus"></i>
                            <span>Создать отчет</span>
                        </a>
                    </p>
                    <table class="table table-striped table-bordered text-left my-orders-table">
                        <thead>
                        <tr class="first last">
                            <th>#</th>
                            <th>Название</th>
                            <th>Тип</th>
                            <th>Создатель</th>
                            <th>Последнее изменение</th>
                            <th class="text-center">Действия</th>
                        </tr>
                        </thead>
                        <tbody>
                        @foreach (var template in templates)
                        {
                            <tr>
                                <td>@template.Id</td>
                                <td>@template.Title</td>
                                <td>@template.Type.GetDescription()</td>
                                <td>@template.User.Name</td>
                                <td>@template.Modificator.Name <br/>(@template.ModificationDate.ToString("dd-MM-yy hh:mm"))</td>
                                <td class="text-center last">
                                    <p class="btn-group">
                                        <a href="@Url.Action("EditReportTemplate", new {id = template.Id})" class="btn btn-sm btn-info">
                                            <i class="fa fa-pencil"></i>
                                        </a>
                                        <a href="@Url.Action("EditGeneralReport", new {id = template.Id})" class="btn btn-sm btn-warning">
                                            <i class="fa fa-list"></i>
                                        </a>
                                        <a href="@Url.Action("RunGeneralReport", new {id = template.Id})" class="btn btn-sm btn-success">
                                            <i class="fa fa-play"></i>
                                        </a>
                                    </p>
                                </td>
                            </tr>}
                        </tbody>
                    </table>
                </div><!-- .content -->
                @{ Html.RenderPartial("SideBar"); }
            </div>
        </div>

	<!-- .container -->
</section>
