@model ProducerInterfaceCommon.ViewModel.ControlPanel.FeedBack.SearchModel

@{
    var ProducerList = ViewBag.ProducerList as IEnumerable<ProducerInterfaceCommon.ContextModels.OptionElement>;
    ViewBag.Title = "Обращения пользователей";
    Layout = "~/Views/Shared/_MasterPage.cshtml";
}

<div class="col-xs-12">
    <h3>@ViewBag.Title</h3>
</div>

<hr/>

<h4> <a data-toggle="collapse" data-target="#seachfilterview">Поиск &raquo;</a>  </h4>
@using (Ajax.BeginForm("FeedBackSearch", new AjaxOptions { HttpMethod="Post", UpdateTargetId= "FeedBackSearchResult", OnBegin= "SearchWait(1)", OnSuccess= "SearchWait(2)" })) {
<div class="row collapse fade" id="seachfilterview" >   
     <div class="col-xs-12">
         <div class="form-group">

             <label class="checkbox-inline">
                 @Html.CheckBoxFor(m => m.Producer, new { @onchange = "ViewProducer()"})
                 <span>Поиск по производителю</span>
             </label>
         
         </div>
         <div class="form-group" id="ProducerSelectView">
             <label>Выберите производителя</label>
             <select id="ProducerId" name="ProducerId" class="form-control">
                 <option selected="selected" value="0"></option>
                 @foreach (var ProducerItem in ProducerList)
                 {
                     <option value="@ProducerItem.Value">@ProducerItem.Text</option>
                 }
             </select>
         </div>
         <div class="from-group">
             <label class="checkbox-inline">
                 @Html.CheckBoxFor(m => m.DateTimeApply, new { @onchange = "ViewDate()" })
                 <span>Поиск по дате</span>
             </label>
         </div>
         <br/>

         <div class="from-group">
             <div class="row" id="DateSelectView">

                 <div class="col-xs-6 col-md-4 col-lg-2">
                     <div class="form-group">
                         <label>C</label>
                         <br />
                         <input type="text" id="Begin" name="Begin" value="@Model.Begin.ToString("dd.MM.yyyy")" class="form-control pointer" readonly />
                     </div>
                 </div>
              
                 <div class="col-xs-6 col-md-4 col-lg-2">
                     <div class="form-group">
                         <label>По</label>
                         <br/>
                         <input type="text" id="End" name="End" value="@Model.End.ToString("dd.MM.yyyy")" class="form-control pointer" readonly />
                     </div>
                 </div>

             </div>
         </div>
         <br />
             <div class="from-group">
                 <input type="submit" value="Поиск" class="btn btn-primary" />
             </div>

             <br />
         </div>
</div>

}


<div class="row" id="SearchWait">
    <div class="col-xs-12">
        <h3><span class="glyphicon glyphicon-time"></span>&nbsp; Ожидайте, поиск.</h3>
    </div>
</div>

<div class="row">
    <div class="col-xs-12" id="FeedBackSearchResult">
        @Html.Action("FeedBackSearch", Model)
    </div>
</div>

@section scripts
{
<link href="~/Content/bootstrap-datepicker.min.css" rel="stylesheet" />
<script src="~/Scripts/bootstrap-datepicker.min.js"></script>
<script src="~/Scripts/locales/bootstrap-datepicker.ru.min.js" charset="UTF-8"></script> 
<script src="~/Scripts/WorkPlace/FeedBack_Index.js"></script>   
}

