@using ProducerInterfaceCommon.ContextModels;
@model IEnumerable<ProducerInterfaceCommon.ContextModels.CompanyDomainName>

<div class="form-group">
    @foreach (var DomainItem in Model)
    {
        <hr />
        <div class="form-group">
            @*<h3 style="text-decoration:none;">Домен: @DomainItem.Name <a style="text-decoration:none;" href="@Url.Action("DeleteDomain","ProducerInformation", new { Id= DomainItem.Id })"><span class="glyphicon glyphicon-trash"></span> &nbsp; Удалить</a></h3>*@
            <h3 style="text-decoration:none;">Домен: @DomainItem.Name <a style="text-decoration:none;"><span class="glyphicon glyphicon-trash"></span>@Ajax.ActionLink(" Удалить", "DeleteDomain", new { Id = DomainItem.Id }, new AjaxOptions { UpdateTargetId= "replacecontent" , Confirm="Вы уверены, что хотите удалить домен " + DomainItem.Name + "?" })</a></h3>
            <h4>Список пользозователей, которые будут заблокированы при удалении домена</h4>
            @foreach (var AccountItem in DomainItem.AccountCompany.Account)
            {
                if (AccountItem.Login.Contains(DomainItem.Name))
                {
                    <p>@AccountItem.Name @AccountItem.Login @AccountItem.AccountAppointment.Name</p>
                }
            }
        </div>
    }

    @if (ViewBag.Delete != null)
    {
        if (ViewBag.Delete.Contains("не"))
        {
            <label>@ViewBag.Delete удален,<span class="text-danger"> нельзя удалить последнее доменное имя у производителя </span></label> 
        }
        else
        {
            <label>@ViewBag.Delete удален</label> 
        }
    }
    @if (ViewBag.ErrorAdd != null)
    { <label>@ViewBag.ErrorAdd </label>}
</div>

@using (Ajax.BeginForm("AddDomain", "ProducerInformation", new AjaxOptions { UpdateTargetId = "replacecontent", Confirm = "Добавляем?", HttpMethod = "POST" }))
{
    <div class="row">
        <input id="AccountCompanyId" name="AccountCompanyId" value="@Model.Select(x=>x.AccountCompany).First().Id" hidden="hidden" />

        <div class="col-lg-6">
            <div class="input-group">
                <input type="text" class="form-control" id="NewDomainName" name="NewDomainName" placeholder="Доменное имя">
                <span class="input-group-btn">
                    <input class="btn btn-primary" type="submit" value="Добавить домен" />
                </span>
            </div>
        </div>

    </div>


}
