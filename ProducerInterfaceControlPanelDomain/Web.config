<?xml version="1.0" encoding="utf-8"?>
<!--
  Дополнительные сведения о настройке приложения ASP.NET см. по адресу:
  http://go.microsoft.com/fwlink/?LinkId=301879
  -->
<configuration>
	<configSections>
		<section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=6.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
		<!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
		<sectionGroup name="common">
			<section name="logging" type="Common.Logging.ConfigurationSectionHandler, Common.Logging" />
		</sectionGroup>
		<section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" />
	</configSections>
	<common>
		<logging>
			<factoryAdapter type="Common.Logging.Log4Net.Log4NetLoggerFactoryAdapter, Common.Logging.Log4net1213">
				<arg key="configType" value="INLINE" />
			</factoryAdapter>
		</logging>
	</common>
	<log4net>
		<appender name="MySqlAdoNetAppender" type="log4net.Appender.ADONetAppender">
			<bufferSize value="1" />
			<connectionType value="MySql.Data.MySqlClient.MySqlConnection, MySql.Data" />
			<connectionString value="Database=analit;Data Source=testsql.analit.net;User Id=system;Password=newpass;" />
			<commandText value="INSERT INTO producerinterface.LogForNet (Message, DateAddLog, ErrorType, Host) VALUES (@Message, @Date,@Level, @Host)" />
			<!--(DateAddLog, ErrorType, Message, Host)   Названия столбцов в БД-->
			<!--(?Date, ?Level,?Message, ?Host) Передаваемые параметры -->
			<reconnectonerror value="true" />
			<usetransactions value="false" />
			<threshold value="ALL" />
			<parameter>
				<parameterName value="@Message" />
				<dbType value="String" />
				<layout type="log4net.Layout.PatternLayout">
					<conversionPattern value="%message" />
				</layout>
			</parameter>
			<parameter>
				<parameterName value="@Date" />
				<dbType value="DATETIME" />
				<layout type="log4net.Layout.RawTimeStampLayout" />
			</parameter>
			<parameter>
				<parameterName value="@Level" />
				<dbType value="String" />
				<layout type="log4net.Layout.PatternLayout">
					<conversionPattern value="%level" />
				</layout>
			</parameter>
			<parameter>
				<parameterName value="@Host" />
				<dbType value="String" />
				<layout type="log4net.Layout.PatternLayout">
					<conversionPattern value="%property{log4net:HostName}" />
				</layout>
			</parameter>
		</appender>
		<appender name="eMail" type="log4net.Appender.SmtpAppender, log4net">
			<to value="alegusov@analit.net" />
			<from value="alegusov@analit.net" />
			<subject value="error logging message" />
			<smtpHost value="box.analit.net" />
			<bufferSize value="512" />
			<lossy value="true" />
			<evaluator type="log4net.Core.LevelEvaluator">
				<threshold value="ERROR" />
			</evaluator>
			<layout type="log4net.Layout.PatternLayout">
				<conversionPattern value="%newline%date [%thread] %-5level %logger [%property{NDC}] - %message%newline%newline%newline" />
			</layout>
		</appender>
		<appender name="LogFile" type="log4net.Appender.RollingFileAppender, log4net">
			<file value="debug.log" />
			<appendToFile value="true" />
			<rollingStyle value="Size" />
			<staticLogFileName value="true" />
			<maximumFileSize value="100KB" />
			<layout type="log4net.Layout.PatternLayout">
				<conversionPattern value="%d{dd.MM.yyyy HH:mm:ss.fff} [%t] %-5p %c - %m%n" />
			</layout>
		</appender>
		<root>
			<level value="ALL" />
			<appender-ref ref="MySqlAdoNetAppender" />
			<appender-ref ref="LogFile" />
			<!--<appender-ref ref="eMail" />      раскоментировать, для получения писем!!!-->
		</root>

	</log4net>

	<appSettings>
		<add key="webpages:Version" value="3.0.0.0" />
		<add key="webpages:Enabled" value="false" />
		<add key="ClientValidationEnabled" value="true" />
		<add key="UnobtrusiveJavaScriptEnabled" value="true" />
		<add key="ReportCountPage" value="100" />
		<add key="ErrorCountPage" value="25" />
		<add key="LogCountPage" value="10" />
		<add key="CookiesName" value="UserAutentification" />
		<add key="IgnoreRoute" value="Registration_Index,MediaFiles_GetFile,Registration_LogOut" />
		<add key="AdminGroupName" value="Администраторы" />
		<add key="GoToProducerUserUrl" value="http://test.analit.net/producerInterface/Account/AdminAuthentification/" />
		<add key="ImageFullUrlString" value="http://test.analit.net/producerinterfacecontrolpanel/mediafiles/" />
		<add key="MailFrom" value="marketing@analit.net" />
		<add key="MailFromSubscription" value="АналитФармация" />
	</appSettings>
	<!--<windowsAuthentication enabled="false">
    <providers>
      <add value="Negotiate" />
      <add value="NTLM" />
    </providers>
  </windowsAuthentication> -->

	<system.webServer>
		<security>
			<requestFiltering>
				<requestLimits maxQueryString="2147483647" />
			</requestFiltering>
			<!--<authentication>
        <anonymousAuthentication enabled="false" />
        <windowsAuthentication enabled="true" />
      </authentication>-->
		</security>
	</system.webServer>



	<system.web>
		<compilation debug="true" targetFramework="4.5.2">
			<assemblies>
				<add assembly="System.Web.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
				<add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
			</assemblies>
		</compilation>
		<httpRuntime targetFramework="4.5.2" />
		<customErrors mode="Off" />
		<!--<authentication mode="Windows" />   
    <authorization>     
      <allow users="?" />
      <deny users="?" />
    </authorization>-->
		<membership defaultProvider="MySQLMembershipProvider">
			<providers>
				<remove name="MySQLMembershipProvider" />
				<add name="MySQLMembershipProvider" type="MySql.Web.Security.MySQLMembershipProvider, MySql.Web, Version=6.9.8.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d" connectionStringName="LocalMySqlServer" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="true" applicationName="/" requiresUniqueEmail="false" passwordFormat="Clear" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="7" minRequiredNonalphanumericCharacters="1" passwordAttemptWindow="10" passwordStrengthRegularExpression="" />
			</providers>
		</membership>
		<profile defaultProvider="MySQLProfileProvider">
			<providers>
				<remove name="MySQLProfileProvider" />
				<add name="MySQLProfileProvider" type="MySql.Web.Profile.MySQLProfileProvider, MySql.Web, Version=6.9.8.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d" connectionStringName="LocalMySqlServer" applicationName="/" />
			</providers>
		</profile>
		<roleManager defaultProvider="MySQLRoleProvider">
			<providers>
				<remove name="MySQLRoleProvider" />
				<add name="MySQLRoleProvider" type="MySql.Web.Security.MySQLRoleProvider, MySql.Web, Version=6.9.8.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d" connectionStringName="LocalMySqlServer" applicationName="/" />
			</providers>
		</roleManager>
		<siteMap defaultProvider="MySqlSiteMapProvider">
			<providers>
				<remove name="MySqlSiteMapProvider" />
				<add name="MySqlSiteMapProvider" type="MySql.Web.SiteMap.MySqlSiteMapProvider, MySql.Web, Version=6.9.8.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d" connectionStringName="LocalMySqlServer" applicationName="/" />
			</providers>
		</siteMap>
		<webParts>
			<personalization defaultProvider="MySQLPersonalizationProvider">
				<providers>
					<remove name="MySQLPersonalizationProvider" />
					<add name="MySQLPersonalizationProvider" type="MySql.Web.Personalization.MySqlPersonalizationProvider, MySql.Web, Version=6.9.8.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d" connectionStringName="LocalMySqlServer" applicationName="/" />
				</providers>
			</personalization>
		</webParts>
	</system.web>
	<runtime>
		<assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
			<dependentAssembly>
				<assemblyIdentity name="Newtonsoft.Json" culture="neutral" publicKeyToken="30ad4fe6b2a6aeed" />
				<bindingRedirect oldVersion="0.0.0.0-6.0.0.0" newVersion="6.0.0.0" />
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="System.Web.Optimization" publicKeyToken="31bf3856ad364e35" />
				<bindingRedirect oldVersion="1.0.0.0-1.1.0.0" newVersion="1.1.0.0" />
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="WebGrease" publicKeyToken="31bf3856ad364e35" />
				<bindingRedirect oldVersion="0.0.0.0-1.5.2.14234" newVersion="1.5.2.14234" />
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" />
				<bindingRedirect oldVersion="1.0.0.0-3.0.0.0" newVersion="3.0.0.0" />
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="MySql.Data" publicKeyToken="c5687fc88969c44d" culture="neutral" />
				<bindingRedirect oldVersion="0.0.0.0-6.9.8.0" newVersion="6.9.8.0" />
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
				<bindingRedirect oldVersion="1.0.0.0-5.2.3.0" newVersion="5.2.3.0" />
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" />
				<bindingRedirect oldVersion="0.0.0.0-3.0.0.0" newVersion="3.0.0.0" />
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="Common.Logging.Core" publicKeyToken="af08829b84f0328e" culture="neutral" />
				<bindingRedirect oldVersion="0.0.0.0-3.3.1.0" newVersion="3.3.1.0" />
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="Common.Logging" publicKeyToken="af08829b84f0328e" culture="neutral" />
				<bindingRedirect oldVersion="0.0.0.0-3.3.1.0" newVersion="3.3.1.0" />
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="log4net" publicKeyToken="669e0ddf0bb1aa2a" culture="neutral" />
				<bindingRedirect oldVersion="0.0.0.0-1.2.15.0" newVersion="1.2.15.0" />
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="System.Web.Razor" publicKeyToken="31bf3856ad364e35" />
				<bindingRedirect oldVersion="0.0.0.0-3.0.0.0" newVersion="3.0.0.0" />
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="System.Web.WebPages.Razor" publicKeyToken="31bf3856ad364e35" />
				<bindingRedirect oldVersion="0.0.0.0-3.0.0.0" newVersion="3.0.0.0" />
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="WebMatrix.WebData" publicKeyToken="31bf3856ad364e35" culture="neutral" />
				<bindingRedirect oldVersion="0.0.0.0-3.0.0.0" newVersion="3.0.0.0" />
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="WebMatrix.Data" publicKeyToken="31bf3856ad364e35" culture="neutral" />
				<bindingRedirect oldVersion="0.0.0.0-1.0.0.0" newVersion="1.0.0.0" />
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="EntityFramework" publicKeyToken="b77a5c561934e089" culture="neutral" />
				<bindingRedirect oldVersion="0.0.0.0-6.0.0.0" newVersion="6.0.0.0" />
			</dependentAssembly>
		</assemblyBinding>
	</runtime>
	<system.data>
		<DbProviderFactories>
			<remove invariant="MySql.Data.MySqlClient" />
			<add name="MySQL Data Provider" invariant="MySql.Data.MySqlClient" description=".Net Framework Data Provider for MySQL" type="MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data, Version=6.9.8.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d" />
		</DbProviderFactories>
	</system.data>

	<connectionStrings>
		<add name="producerinterface_Entities" connectionString="metadata=res://*/ContextModels.producerinterface_Entities.csdl|res://*/ContextModels.producerinterface_Entities.ssdl|res://*/ContextModels.producerinterface_Entities.msl;provider=MySql.Data.MySqlClient;provider connection string=&quot;server=testsql.analit.net;database=producerinterface;user id=system;password=newpass&quot;" providerName="System.Data.EntityClient" />
		<add name="Logger_Entities" connectionString="metadata=res://*/LoggerModels.Logger_Entities.csdl|res://*/LoggerModels.Logger_Entities.ssdl|res://*/LoggerModels.Logger_Entities.msl;provider=MySql.Data.MySqlClient;provider connection string=&quot;server=testsql.analit.net;user id=system;password=newpass;persistsecurityinfo=True;database=producerinterface&quot;" providerName="System.Data.EntityClient" />
		<add name="producerinterface" connectionString="Data Source=testsql.analit.net;database=producerinterface;User ID=system;password=newpass;" />
		<!--<add name="producerinterface_Entities" connectionString="metadata=res://*/ContextModels.producerinterface_Entities.csdl|res://*/ContextModels.producerinterface_Entities.ssdl|res://*/ContextModels.producerinterface_Entities.msl;provider=MySql.Data.MySqlClient;provider connection string=&quot;server=bd.sql.adc.analit.net;database=producerinterface;user id=ProducerIf;password=password&quot;" providerName="System.Data.EntityClient"/>
    <add name="producerinterface" connectionString="Data Source=server=bd.sql.adc.analit.net;database=producerinterface;user id=ProducerIf"/>
    <add name="Logger_Entities" connectionString="metadata=res://*/LoggerModels.Logger_Entities.csdl|res://*/LoggerModels.Logger_Entities.ssdl|res://*/LoggerModels.Logger_Entities.msl;provider=MySql.Data.MySqlClient;provider connection string=&quot;server=bd.sql.adc.analit.net;database=producerinterface;user id=ProducerIf;password=password&quot;" providerName="System.Data.EntityClient"/>-->

		<remove name="LocalMySqlServer" />
		<add name="LocalMySqlServer" connectionString="" providerName="MySql.Data.MySqlClient" />
	</connectionStrings>
	
	<entityFramework>
		<defaultConnectionFactory type="MySql.Data.Entity.MySqlConnectionFactory, MySql.Data.Entity.EF6" />
		<providers>
			<provider invariantName="MySql.Data.MySqlClient" type="MySql.Data.MySqlClient.MySqlProviderServices, MySql.Data.Entity.EF6, Version=6.9.8.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d" />
		</providers>
	</entityFramework>
	<system.codedom>
		<compilers>
			<compiler language="c#;cs;csharp" extension=".cs" type="Microsoft.CodeDom.Providers.DotNetCompilerPlatform.CSharpCodeProvider, Microsoft.CodeDom.Providers.DotNetCompilerPlatform, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" warningLevel="4" compilerOptions="/langversion:6 /nowarn:1659;1699;1701" />
			<compiler language="vb;vbs;visualbasic;vbscript" extension=".vb" type="Microsoft.CodeDom.Providers.DotNetCompilerPlatform.VBCodeProvider, Microsoft.CodeDom.Providers.DotNetCompilerPlatform, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" warningLevel="4" compilerOptions="/langversion:14 /nowarn:41008 /define:_MYTYPE=\&quot;Web\&quot; /optionInfer+" />
		</compilers>
	</system.codedom>

</configuration>